<%- include('header', {seoDetails}) %>

<!-- Start main-content -->
<section class="page-title" style="background-image: url(/assets/images/background/page-title-bg.png);">
    <div class="auto-container">
        <div class="title-outer text-center">
            <h1 class="title">Stays</h1>
            <ul class="page-breadcrumb">
                <li><a href="/">Home</a></li>
                <li>Stays</li>
            </ul>
        </div>
    </div>
</section>
<!-- end main-content -->

<!-- feature-section -->
<section class="feature-section">
    <div class="auto-container">
        <% if (stays && Array.isArray(stays) && stays.length > 0) { %>
            <% stays.forEach((item, index) => { %>
                <% 
                    // Alternate layout: even index (0, 2, 4...) = image left, content right
                    // odd index (1, 3, 5...) = content left, image right
                    const isReversed = index % 2 === 1;
                    const delay = (index + 1) * 100;
                %>
                <div class="row feature-row g-0 wow slideInUp" data-wow-delay="<%= delay %>ms">
                    <% if (isReversed) { %>
                        <!-- Content first, then image (reversed layout) -->
                        <div class="content-column col-lg-8 col-md-12 col-sm-12">
                            <div class="inner-column">
                                <div class="content-box">
                                    <div class="sec-title">
                                        <span class="sub-title" style="text-transform: uppercase;"><%= item.tagline %></span>
                                        <h2><%= item.title %></h2>
                                        <div class="text"><%= item.description %></div>
                                    </div>
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                        <a href="<%= item.link || '#' %>" class="theme-btn btn-style-one read-more">Discover More</a>
                                        <a href="<%= item.link || '#' %>" class="theme-btn btn-style-one book-now-btn" style="background-color: #aa8453; color: white; border-color: #aa8453;">Book Now</a>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="image-column col-lg-4 col-md-12 col-sm-12">
                            <div class="inner-column" style="margin-top: 120px;">
                                <div class="image-box product-details rd-page">
                                    <% 
                                        // Use detailImages if available, otherwise use single image
                                        const itemImages = (item.detailImages && item.detailImages.length > 0) ? item.detailImages : [item.image];
                                    %>
                                    <% if (itemImages.length > 0) { %>
                                        <div class="bxslider">
                                            <% itemImages.forEach((img, imgIndex)=> { %>
                                                <div class="slider-content">
                                                    <figure class="image-box">
                                                        <img style="height: 380px;" src="<%= img %>" alt="<%= item.title %>">
                                                    </figure>
                                                </div>
                                            <% }); %>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% } else { %>
                        <!-- Image first, then content (normal layout) -->
                        <div class="image-column col-lg-4 col-md-12 col-sm-12">
                            <div class="inner-column" style="margin-top: 120px;">
                                <div class="image-box product-details rd-page">
                                    <% 
                                        // Use detailImages if available, otherwise use single image
                                        const itemImages = (item.detailImages && item.detailImages.length > 0) ? item.detailImages : [item.image];
                                    %>
                                    <% if (itemImages.length > 0) { %>
                                        <div class="bxslider">
                                            <% itemImages.forEach((img, imgIndex)=> { %>
                                                <div class="slider-content">
                                                    <figure class="image-box">
                                                        <img style="height: 380px;" src="<%= img %>" alt="<%= item.title %>">
                                                    </figure>
                                                </div>
                                            <% }); %>
                                        </div>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        <div class="content-column col-lg-8 col-md-12 col-sm-12">
                            <div class="inner-column">
                                <div class="content-box">
                                    <div class="sec-title">
                                        <span class="sub-title" style="text-transform: uppercase;"><%= item.tagline %></span>
                                        <h2><%= item.title %></h2>
                                        <div class="text"><%= item.description %></div>
                                    </div>
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                        <a href="<%= item.link || '#' %>" class="theme-btn btn-style-one read-more">Discover More</a>
                                        <a href="<%= item.link || '#' %>" class="theme-btn btn-style-one book-now-btn" style="background-color: #aa8453; color: white; border-color: #aa8453;">Book Now</a>
                                    </div>

                                </div>
                            </div>
                        </div>
                    <% } %>
                </div>
            <% }); %>
        <% } %>
    </div>
</section>

<style>
    .feature-section .image-box {
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    .feature-section .bxslider {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    .feature-section .bxslider .slider-content {
        width: 100%;
    }

    .feature-section .bxslider .slider-content .image-box {
        width: 100%;
        margin: 0;
    }

    .feature-section .bxslider .slider-content .image-box img {
        width: 100%;
        height: auto;
        display: block;
    }
    
    /* Hide navigation arrows for stay sliders */
    .feature-section .bx-controls-direction {
        display: none !important;
    }
    
    .feature-section .bx-prev,
    .feature-section .bx-next {
        display: none !important;
    }
    
    .feature-section .book-now-btn:hover {
        background-color: var(--theme-color1, #222222) !important;
        color: white !important;
        border-color: var(--theme-color1, #222222) !important;
    }
</style>

<!-- Viewport-based auto-play is now handled globally in script.js -->

<%- include('footer') %>
