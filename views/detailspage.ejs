<% 
    // Determine the type and current item
    const currentItem = typeof venue !== 'undefined' && venue ? venue : (typeof stay !== 'undefined' && stay ? stay : (typeof dining !== 'undefined' && dining ? dining : null));
    const itemType = typeof venue !== 'undefined' && venue ? 'venue' : (typeof stay !== 'undefined' && stay ? 'stay' : (typeof dining !== 'undefined' && dining ? 'dining' : 'venue'));
    const typePath = itemType === 'venue' ? '/venue' : (itemType === 'stay' ? '/stay' : '/dining');
    const typeLabel = itemType === 'venue' ? 'Venue' : (itemType === 'stay' ? 'Stay' : 'Dining');
%>

<%- include('header', {seoDetails, itemType, currentItem}) %>

<% 
    // Extract YouTube video ID from currentItem.youtubeVideo
    let youtubeVideoId = '';
    if (currentItem && currentItem.youtubeVideo) {
        const youtubeUrl = currentItem.youtubeVideo;
        if (youtubeUrl.includes('youtu.be/')) {
            youtubeVideoId = youtubeUrl.split('youtu.be/')[1]?.split('?')[0] || '';
        } else if (youtubeUrl.includes('youtube.com/watch')) {
            youtubeVideoId = youtubeUrl.split('v=')[1]?.split('&')[0] || '';
        }
    }
%>

<!-- Preloader Component -->
<%- include('./partials/details/preloader', { currentItem, youtubeVideoId }) %>

<!-- Banner Component -->
<%- include('./partials/details/banner', { currentItem, youtubeVideoId, typePath, typeLabel }) %>

<!--Room Details Start-->
<section class="blog-details">
    <div class="container" style="padding-bottom: 60px;">
        <div class="row">
            <div class="col-xl-12 col-lg-12 product-details rd-page">
                <!-- Image Gallery Component -->
                <%- include('./partials/details/imageGallery', { currentItem }) %>
                
                <!-- Content Component -->
                <%- include('./partials/details/content', { currentItem, itemType, typeLabel, websiteID: typeof websiteID !== 'undefined' ? websiteID : '', API_BASE_URL: typeof API_BASE_URL !== 'undefined' ? API_BASE_URL : '', venues: typeof venues !== 'undefined' ? venues : [] }) %>
            </div>
        </div>
    </div>
</section>

<!-- Related Items Component -->
<%- include('./partials/details/relatedItems', { currentItem, itemType, typeLabel, stays: typeof stays !== 'undefined' ? stays : [], diningList: typeof diningList !== 'undefined' ? diningList : [], venues: typeof venues !== 'undefined' ? venues : [] }) %>

<%- include('footer') %>

<!-- Styles Component -->
<%- include('./partials/details/styles') %>

<!-- Scripts Component -->
<%- include('./partials/details/scripts', { currentItem }) %>

<!-- YouTube Script Component -->
<%- include('./partials/details/youtubeScript', { youtubeVideoId }) %>
