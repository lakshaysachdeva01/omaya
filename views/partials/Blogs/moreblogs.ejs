<% if (latestblog && latestblog.length > 0) { %>
    <% 
      const imageBase = typeof S3_BASE_URL !== 'undefined' && S3_BASE_URL 
        ? S3_BASE_URL.replace(/\/$/, '') + '/' 
        : (typeof process !== 'undefined' && process.env && process.env.S3_BASE_URL 
          ? process.env.S3_BASE_URL.replace(/\/$/, '') + '/' 
          : '');
    %>
    <div class="sidebar__single sidebar__post">
      <h3 class="sidebar__title">Latest Posts</h3>
      <ul class="sidebar__post-list list-unstyled">
        <style>
          .sidebar__post-image {
            width: 100px;
            height: 100px;
            flex-shrink: 0;
            overflow: hidden;
            border-radius: 4px;
          }
          .sidebar__post-list li {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
          }
        </style>
        <% latestblog.forEach(item=> { %>
          <% 
            const slug = item.seoConfigs?.slug || item.seoconfigs?.slug || item.seoDetails?.slug || '';
            const imageUrl = item.coverImage || item.uploadBanner || '';
            const title = item.postTitle || item.title || '';
          %>
          <li style="align-items: center;">
            <div class="sidebar__post-image">
              <img src="<%= imageBase + imageUrl %>" alt="<%= title %>" style="width: 100%; height: 100%; object-fit: cover; aspect-ratio: 1/1;">
            </div>
            <div class="sidebar__post-content">
              <h3 style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; text-overflow: ellipsis;">
                <a href="/blog/<%= slug %>"><%= title %></a>
              </h3>
            </div>
          </li>
        <% }) %>
      </ul>
    </div>
<% } %>