<style>
  /* Animation container */
  .video-preload-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #ffffff;
      z-index: 999999;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
      transition: opacity 0.8s ease-out;
      will-change: opacity;
  }
  
  /* Hide animation after it's done */
  .video-preload-animation.hidden {
      opacity: 0;
      pointer-events: none;
  }
  
  /* Logo container - allows logo to move freely */
  .logo-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
  }
  
  /* Logo animation */
  .loading-logo {
      width: 200px;
      height: 200px;
      animation: logoPulse 2s ease-in-out forwards;
      opacity: 0;
      transform: scale(0.7);
      position: relative;
  }
  
  @keyframes logoPulse {
      0% {
          opacity: 0;
          transform: scale(0.7);
      }
     
      100% {
          opacity: 1;
          transform: scale(1);
          
      }
  }
  
  /* Golden loader below logo - absolutely positioned */
  .loading-spinner {
      display: none;
      position: absolute;
      top: calc(100% + 20px);
      left: 50%;
      margin-left: -20px; /* Half of width (40px) to center */
      width: 40px;
      height: 40px;
      border: 3px solid rgba(212, 175, 55, 0.3);
      border-top: 3px solid #D4AF37;
      border-radius: 50%;
      animation: spin 1s linear infinite;
  }
  
  .loading-spinner.show {
      display: block;
  }
  
  @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
  }
  
  /* Banner YouTube video player styles */
  .banner-section .banner-youtube-container {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      overflow: hidden;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      isolation: isolate;
      background: transparent !important;
      background-image: none !important;
      opacity: 0;
      transition: opacity 0.5s ease;
  }
  
  .banner-section .banner-youtube-container.loaded {
      opacity: 1;
  }
  
  .banner-section .banner-youtube-container iframe {
      width: 100%;
      height: 100%;
      border: none;
      pointer-events: none !important;
      -webkit-touch-callout: none;
      transform: translateZ(0) scale(1.6);
      -webkit-transform: translateZ(0) scale(1.6);
      transform-origin: center center;
      -webkit-transform-origin: center center;
      opacity: 1;
      position: relative;
      z-index: 1;
      filter: brightness(0.7);
      background-image: none !important;
      background: transparent !important;
      background-color: transparent !important;
      background-size: unset !important;
      background-position: unset !important;
      background-repeat: unset !important;
  }
  
  /* Mobile: Make video cover full area without black bars */
  @media (max-width: 768px) {
      .banner-section .banner-youtube-container iframe {
          transform: translateZ(0) scale(3.8) !important;
          -webkit-transform: translateZ(0) scale(3.8) !important;
          transform-origin: center center;
          -webkit-transform-origin: center center;
          will-change: transform;
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
          image-rendering: -webkit-optimize-contrast;
          image-rendering: crisp-edges;
      }
  }
  
  .banner-section .banner-youtube-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 99999 !important;
      pointer-events: auto !important;
      background: transparent;
      cursor: default !important;
  }
  
  /* Video overlay - separate element to ensure visibility */
  .banner-section .banner-youtube-container .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.1);
      z-index: 3 !important;
      pointer-events: none;
      display: block !important;
  }
  
  .banner-section .banner-youtube-container .youtube-overlay-blocker {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      z-index: 100000 !important;
      pointer-events: auto !important;
      background: transparent !important;
      cursor: default !important;
      display: block !important;
  }
  
  .banner-section .banner-youtube-container:hover::before {
      pointer-events: auto !important;
      z-index: 99999 !important;
  }
  
  .banner-section .banner-youtube-container:hover .youtube-overlay-blocker {
      pointer-events: auto !important;
      z-index: 100000 !important;
  }
  
  .banner-section .banner-slide {
      position: relative;
  }
  
  .banner-section .content-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      -webkit-transform: translate(-50%, -50%);
      z-index: 100001 !important;
      text-align: center;
      min-width: 700px;
      opacity: 0;
      transition: opacity 0.5s ease;
  }

  @media (max-width: 768px) {
    .banner-section .content-box {
      min-width: 350px;
    }
  }
  
  .banner-section .content-box.visible {
      opacity: 1;
  }
  
  /* Remove logo/title image from banner sub-title */
  .banner-section .content-box .sub-title::before {
      display: none !important;
      content: none !important;
  }
</style>

<!-- Video Preload Animation -->
<div class="video-preload-animation" id="videoPreloadAnimation">
  <div class="logo-container">
    <img src="/assets/images/Omaya_Logo_Black.svg" alt="Omaya Logo" class="loading-logo" id="loadingLogo">
    <div class="loading-spinner" id="loadingSpinner"></div>
  </div>
</div>

<!-- banner section -->
<section class="banner-section">
  <div class="banner-slider">
      <div class="banner-slide">
          <div class="banner-youtube-container" id="banner-youtube-player" style="width: 100%; height: 100%; filter:brightness(0.7); position: relative;">
              <!-- YouTube Player will be initialized here -->
              <div class="video-overlay"></div>
              <div class="youtube-overlay-blocker"></div>
          </div>
          <div class="content-box">
              <span class="sub-title" data-animation-in="fadeInUp" data-delay-in="0.1">Stay • Dine • Relax • Celebrate</span>
              <h1 data-animation-in="fadeInUp" data-delay-in="0.3">Indulge In Omaya’s Elegant Living</h1>
          </div>
      </div>
  </div>
</section>
<!-- End banner section -->

<!-- YouTube IFrame API -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
  // Banner YouTube player - SCOPED TO BANNER ONLY
  var bannerYouTubePlayer = null;
  var bannerVideoId = 'sDXBgKB7IS8'; // Landing banner video
  var bannerVideoReady = false; // Renamed to be banner-specific
  var bannerAnimationCompleted = false; // Renamed to be banner-specific
  var animationDuration = 1000; // 1 second
  var bannerVideoLoadStarted = false; // Renamed to be banner-specific
  var preloaderForceHideTimeout = null; // Force hide preloader after max time
  var maxPreloaderTime = 5000; // Maximum 5 seconds before forcing hide
  var preloaderHidden = false; // Track if preloader is already hidden

  // YouTube API ready callback - BANNER SPECIFIC
  function onYouTubeIframeAPIReadyBanner() {
      // Only initialize banner player, not other videos
      setTimeout(initializeBannerYouTubePlayer, 100);
  }
  
  // Store original callback if it exists
  var originalYouTubeCallback = window.onYouTubeIframeAPIReady;
  
  // Set up banner-specific callback
  if (typeof YT !== 'undefined' && YT.Player) {
      // API already loaded
      onYouTubeIframeAPIReadyBanner();
  } else {
      // Store the banner callback
      var bannerCallback = function() {
          if (originalYouTubeCallback) {
              originalYouTubeCallback();
          }
          onYouTubeIframeAPIReadyBanner();
      };
      
      // Set up callback - but also check periodically if API loads
      if (window.onYouTubeIframeAPIReady) {
          // If callback already exists, wrap it
          var existingCallback = window.onYouTubeIframeAPIReady;
          window.onYouTubeIframeAPIReady = function() {
              existingCallback();
              bannerCallback();
          };
      } else {
          window.onYouTubeIframeAPIReady = bannerCallback;
      }
      
      // Periodically check if API loaded (in case callback was overwritten)
      var apiCheckInterval = setInterval(function() {
          if (typeof YT !== 'undefined' && YT.Player && !bannerYouTubePlayer) {
              clearInterval(apiCheckInterval);
              onYouTubeIframeAPIReadyBanner();
          }
      }, 500);
      
      // Stop checking after 10 seconds
      setTimeout(function() {
          clearInterval(apiCheckInterval);
      }, 10000);
      
      // Fallback: if API doesn't load within 4 seconds, force hide preloader
      setTimeout(function() {
          if (!bannerYouTubePlayer && !preloaderHidden) {
              forceHidePreloader();
          }
      }, 4000);
  }
  
  // Additional safety: check on window load
  window.addEventListener('load', function() {
      setTimeout(function() {
          if (!preloaderHidden) {
              var animationEl = document.getElementById('videoPreloadAnimation');
              if (animationEl && !animationEl.classList.contains('hidden')) {
                  // If preloader still visible after page load + 2 seconds, force hide
                  setTimeout(function() {
                      if (!preloaderHidden) {
                          forceHidePreloader();
                      }
                  }, 2000);
              }
          }
      }, 1000);
  });
  
  // Ultimate fallback: force hide after 6 seconds no matter what
  setTimeout(function() {
      if (!preloaderHidden) {
          forceHidePreloader();
      }
  }, 6000);

  // Set optimal quality - prefer highest available, minimum 1440p
  // On mobile, be more aggressive about quality enforcement
  function setOptimalQuality(player) {
      if (!player) return;
      
      var isMobile = window.innerWidth <= 768;
      
      try {
          // Try to get available quality levels
          var availableQualities = ['highres', 'hd2160', 'hd1440', 'hd1080'];
          
          // On mobile, try even harder to get high quality
          if (isMobile) {
              // Try multiple times with different approaches
              for (var attempt = 0; attempt < 3; attempt++) {
                  for (var i = 0; i < availableQualities.length; i++) {
                      try {
                          player.setPlaybackQuality(availableQualities[i]);
                      } catch(e) {
                          continue;
                      }
                  }
              }
          } else {
              // Desktop: try highest available quality
              for (var i = 0; i < availableQualities.length; i++) {
                  try {
                      player.setPlaybackQuality(availableQualities[i]);
                      break;
                  } catch(e) {
                      continue;
                  }
              }
          }
          
          // Fallback: ensure minimum quality (1080p on mobile, 1440p on desktop)
          try {
              var currentQuality = player.getPlaybackQuality();
              var minQuality = isMobile ? 'hd1080' : 'hd1440';
              
              if (currentQuality !== 'highres' && 
                  currentQuality !== 'hd2160' && 
                  currentQuality !== 'hd1440' &&
                  (!isMobile || currentQuality !== 'hd1080')) {
                  player.setPlaybackQuality(minQuality);
              }
          } catch(e) {
              // Ignore errors
          }
      } catch(e) {
          // Ignore errors
      }
  }

  // Force hide preloader after maximum time
  function forceHidePreloader() {
      if (preloaderHidden) {
          return;
      }
      preloaderHidden = true;
      
      var animationEl = document.getElementById('videoPreloadAnimation');
      if (animationEl) {
          hideLoadingSpinner();
          requestAnimationFrame(function() {
              animationEl.classList.add('hidden');
          });
          setTimeout(function() {
              if (animationEl && animationEl.parentNode) {
                  animationEl.parentNode.removeChild(animationEl);
              }
          }, 800);
      }
      
      // Show content box
      var contentBox = document.querySelector('.content-box');
      if (contentBox) {
          contentBox.classList.add('visible');
      }
      
      // Also try to start video playback
      if (bannerYouTubePlayer) {
          try {
              bannerYouTubePlayer.playVideo();
              var container = document.querySelector('.banner-youtube-container');
              if (container) {
                  container.style.opacity = '1';
                  container.classList.add('loaded');
              }
          } catch(e) {
              console.error('Error forcing video playback:', e);
          }
      } else {
          // If player not initialized, at least show the container
          var container = document.querySelector('.banner-youtube-container');
          if (container) {
              container.style.opacity = '1';
              container.classList.add('loaded');
          }
      }
      
      // Start monitoring if player exists
      if (bannerYouTubePlayer) {
          startVideoMonitoring();
      }
  }

  // Initialize banner YouTube player
  function initializeBannerYouTubePlayer() {
      // Check if API is actually available
      if (typeof YT === 'undefined' || typeof YT.Player === 'undefined') {
          setTimeout(function() {
              if (typeof YT !== 'undefined' && typeof YT.Player !== 'undefined') {
                  initializeBannerYouTubePlayer();
              } else {
                  if (!preloaderHidden) {
                      forceHidePreloader();
                  }
              }
          }, 1000);
          return;
      }
      
      var container = document.getElementById('banner-youtube-player');
      if (!container) {
          setTimeout(function() {
              if (!preloaderHidden) {
                  forceHidePreloader();
              }
          }, 1000);
          return;
      }
      
      if (bannerYouTubePlayer) {
          return;
      }

      // Set maximum timeout to force hide preloader
      preloaderForceHideTimeout = setTimeout(function() {
          forceHidePreloader();
      }, maxPreloaderTime);
      
      // Also set a shorter fallback (3 seconds) in case video never loads
      setTimeout(function() {
          if (!bannerVideoReady && !preloaderHidden) {
              bannerVideoReady = true;
              bannerAnimationCompleted = true;
              startVideoPlayback();
          }
      }, 3000);

      // Start the animation timer - BANNER ONLY
      setTimeout(function() {
          bannerAnimationCompleted = true;
          if (bannerVideoReady) {
              startVideoPlayback();
          } else {
              // Show loading state if video isn't ready yet - animation plays once and stays
              // ONLY show preloader for banner video
              var logo = document.getElementById('loadingLogo');
              var spinner = document.getElementById('loadingSpinner');
              if (logo && document.getElementById('banner-youtube-player')) {
                  logo.style.opacity = '1';
                  logo.style.animation = 'logoPulse 2s ease-in-out forwards';
                  // Keep logo visible at final state if still loading
                  logo.style.transform = 'scale(1)';
              }
              // Show golden loader below logo after animation completes
              if (spinner && document.getElementById('banner-youtube-player')) {
                  spinner.classList.add('show');
              }
          }
      }, animationDuration);

      bannerYouTubePlayer = new YT.Player('banner-youtube-player', {
          videoId: bannerVideoId,
          width: '100%',
          height: '100%',
          playerVars: {
              'autoplay': 0, // Start with autoplay disabled
              'mute': 1,
              'loop': 1,
              'playlist': bannerVideoId,
              'controls': 0,
              'rel': 0,
              'modestbranding': 1,
              'playsinline': 1,
              'vq': 'highres', // Prefer highest available quality
              'enablejsapi': 1,
              'iv_load_policy': 3,
              'cc_load_policy': 0,
              'disablekb': 1,
              'fs': 0,
              'showinfo': 0,
              'origin': window.location.origin,
              'widget_referrer': window.location.origin
          },
          events: {
              'onReady': function(event) {
                  var player = event.target;
                  var iframe = document.getElementById('banner-youtube-player');
                  
                  bannerVideoLoadStarted = true;
                  
                  try {
                      // Set initial quality - prefer highest, minimum 1440p
                      setOptimalQuality(player);
                      player.mute();
                      
                      // Load video but don't play yet
                      // On mobile, use hd1080 as minimum, on desktop use highres
                      var isMobile = window.innerWidth <= 768;
                      var suggestedQuality = isMobile ? 'hd1080' : 'highres';
                      
                      player.cueVideoById({
                          'videoId': bannerVideoId,
                          'startSeconds': 0,
                          'suggestedQuality': suggestedQuality
                      });
                      
                      // Mark video as ready when enough data is loaded
                      checkVideoBuffered(player);
                      
                      // Set quality multiple times for reliability
                      // On mobile, be even more aggressive
                      var isMobile = window.innerWidth <= 768;
                      var qualityAttempts = isMobile ? [50, 100, 150, 300, 500, 800, 1200, 2000] : [50, 150, 300, 600];
                      
                      for (var i = 0; i < qualityAttempts.length; i++) {
                          setTimeout(function() {
                              setOptimalQuality(player);
                          }, qualityAttempts[i]);
                      }
                      
                      if (iframe && iframe.parentElement) {
                          var container = iframe.parentElement;
                          var blocker = container.querySelector('.youtube-overlay-blocker');
                          if (!blocker) {
                              blocker = document.createElement('div');
                              blocker.className = 'youtube-overlay-blocker';
                              container.appendChild(blocker);
                          }
                          
                          // Find the actual YouTube iframe element
                          var youtubeIframe = container.querySelector('iframe');
                          if (youtubeIframe) {
                              youtubeIframe.style.pointerEvents = 'none';
                              youtubeIframe.style.opacity = '0';
                              
                              // Style iframe
                              styleYouTubeIframe(youtubeIframe);
                          }
                      }
                      
                      // Safety check: if video isn't ready after 3 seconds, force it - BANNER ONLY
                      setTimeout(function() {
                          if (!bannerVideoReady) {
                              bannerVideoReady = true;
                              if (bannerAnimationCompleted) {
                                  startVideoPlayback();
                              } else {
                                  // If animation not completed, complete it and start playback
                                  bannerAnimationCompleted = true;
                                  startVideoPlayback();
                              }
                          }
                      }, 3000);
                      
                  } catch(e) {
                      console.error('YouTube player error:', e);
                      // If error, mark as ready after animation - BANNER ONLY
                      setTimeout(function() {
                          bannerVideoReady = true;
                          if (bannerAnimationCompleted) {
                              startVideoPlayback();
                          }
                      }, animationDuration + 500);
                  }
              },
              'onStateChange': function(event) {
                  var player = event.target;
                  
                  if (event.data === YT.PlayerState.BUFFERING) {
                      // Video is buffering - check if it has enough data
                      checkVideoBuffered(player);
                      // Ensure quality during buffering
                      setOptimalQuality(player);
                  }
                  else if (event.data === YT.PlayerState.PLAYING) {
                      // Video started playing - hide animation and show content
                      completeLoadingSequence();
                      // Ensure quality while playing
                      setOptimalQuality(player);
                  }
                  else if (event.data === YT.PlayerState.CUED) {
                      // Video is cued and ready - BANNER ONLY
                      bannerVideoReady = true;
                      setOptimalQuality(player);
                      if (bannerAnimationCompleted) {
                          startVideoPlayback();
                      } else {
                          // If animation still running, check buffer
                          checkVideoBuffered(player);
                      }
                  }
                  else if (event.data === YT.PlayerState.PAUSED) {
                      // If video gets paused, play it (for loop)
                      try {
                          player.playVideo();
                      } catch(e) {
                          // Ignore errors
                      }
                  }
                  else if (event.data === YT.PlayerState.ENDED) {
                      // Video ended - restart for loop
                      try {
                          player.seekTo(0, true);
                          player.playVideo();
                          setOptimalQuality(player);
                      } catch(e) {
                          // Ignore errors
                      }
                  }
              },
              'onPlaybackQualityChange': function(event) {
                  // Ensure high quality - different thresholds for mobile vs desktop
                  var currentQuality = event.data;
                  var player = event.target;
                  var isMobile = window.innerWidth <= 768;
                  
                  // Quality hierarchy: highres > hd2160 > hd1440 > hd1080 > hd720
                  // Desktop: Accept highres, hd2160, hd1440 (minimum 1440p)
                  // Mobile: Accept highres, hd2160, hd1440, hd1080 (minimum 1080p)
                  var acceptableQualities = isMobile 
                      ? ['highres', 'hd2160', 'hd1440', 'hd1080']
                      : ['highres', 'hd2160', 'hd1440'];
                  
                  var isAcceptable = false;
                  for (var i = 0; i < acceptableQualities.length; i++) {
                      if (currentQuality === acceptableQualities[i]) {
                          isAcceptable = true;
                          break;
                      }
                  }
                  
                  if (!isAcceptable) {
                      try {
                          // Try to set to higher quality
                          setOptimalQuality(player);
                      } catch(e) {
                          // If that fails, force minimum quality
                          try {
                              var minQuality = isMobile ? 'hd1080' : 'hd1440';
                              player.setPlaybackQuality(minQuality);
                          } catch(e2) {
                              // Ignore errors
                          }
                      }
                  }
              }
          }
      });
  }

  // Check if video has enough data buffered
  var bufferCheckAttempts = 0;
  var maxBufferChecks = 30; // Maximum 6 seconds of checking (30 * 200ms)
  
  function checkVideoBuffered(player) {
      try {
          bufferCheckAttempts++;
          
          // Get video buffer status
          var buffered = player.getVideoLoadedFraction();
          
          // Consider video ready if at least 20% is buffered (lowered threshold) - BANNER ONLY
          if (buffered > 0.2 || bufferCheckAttempts >= maxBufferChecks) {
              bannerVideoReady = true;
              if (bannerAnimationCompleted) {
                  startVideoPlayback();
              }
              return true;
          } else {
              // Check again in 200ms
              setTimeout(function() {
                  checkVideoBuffered(player);
              }, 200);
              return false;
          }
      } catch(e) {
          // If we can't check, mark as ready after animation with shorter timeout
          setTimeout(function() {
              bannerVideoReady = true;
              if (bannerAnimationCompleted) {
                  startVideoPlayback();
              }
          }, animationDuration + 1000);
          return false;
      }
  }

  // Start video playback - BANNER ONLY
  function startVideoPlayback() {
      if (!bannerYouTubePlayer) {
          setTimeout(function() {
              if (!preloaderHidden) {
                  forceHidePreloader();
              }
          }, 2000);
          return;
      }
      
      if (!bannerVideoReady) {
          bannerVideoReady = true;
      }
      
      // Hide spinner when video starts playing
      hideLoadingSpinner();
      
      try {
          // Play the video
          bannerYouTubePlayer.playVideo();
          
          // Fade in the video container
          var container = document.querySelector('.banner-youtube-container');
          if (container) {
              container.style.opacity = '1';
              container.classList.add('loaded');
          }
          
          // Show the YouTube iframe
          var youtubeIframe = document.querySelector('.banner-youtube-container iframe');
          if (youtubeIframe) {
              youtubeIframe.style.opacity = '1';
          }
          
      } catch(e) {
          console.error('Error starting video:', e);
          // If error, force hide preloader
          setTimeout(function() {
              if (!preloaderHidden) {
                  forceHidePreloader();
              }
          }, 1000);
      }
  }

  // Hide the loading spinner
  function hideLoadingSpinner() {
      var spinner = document.getElementById('loadingSpinner');
      if (spinner) {
          spinner.classList.remove('show');
      }
  }

  // Complete loading sequence - hide animation, show content
  function completeLoadingSequence() {
      if (preloaderHidden) return;
      
      preloaderHidden = true;
      
      // Clear force hide timeout since we're hiding normally
      if (preloaderForceHideTimeout) {
          clearTimeout(preloaderForceHideTimeout);
          preloaderForceHideTimeout = null;
      }
      
      // Hide spinner
      hideLoadingSpinner();
      
      // Hide animation overlay
      var animationEl = document.getElementById('videoPreloadAnimation');
      if (animationEl) {
          // Add class on next frame to ensure transition kicks in
          requestAnimationFrame(function() {
              animationEl.classList.add('hidden');
          });
          // Remove from DOM after transition
          setTimeout(function() {
              if (animationEl && animationEl.parentNode) {
                  animationEl.parentNode.removeChild(animationEl);
              }
          }, 800);
      }
      
      // Show content
      var contentBox = document.querySelector('.content-box');
      if (contentBox) {
          contentBox.classList.add('visible');
      }
      
      // Start monitoring to keep video playing
      startVideoMonitoring();
  }

  // Style YouTube iframe
  function styleYouTubeIframe(youtubeIframe) {
      youtubeIframe.style.backgroundImage = 'none';
      youtubeIframe.style.background = 'transparent';
      youtubeIframe.style.backgroundColor = 'transparent';
      youtubeIframe.style.backgroundSize = 'unset';
      youtubeIframe.style.backgroundPosition = 'unset';
      youtubeIframe.style.backgroundRepeat = 'unset';
      
      youtubeIframe.style.setProperty('background-image', 'none', 'important');
      youtubeIframe.style.setProperty('background', 'transparent', 'important');
      youtubeIframe.style.setProperty('background-color', 'transparent', 'important');
      youtubeIframe.style.setProperty('background-size', 'unset', 'important');
      youtubeIframe.style.setProperty('background-position', 'unset', 'important');
      youtubeIframe.style.setProperty('background-repeat', 'unset', 'important');
      
      // Force scale on iframe - slightly reduced for mobile to improve quality, 1.6 for desktop
      var isMobile = window.innerWidth <= 768;
      var scaleValue = isMobile ? 3.8 : 1.6; // Reduced from 3.8 to 3.2 for better quality
      youtubeIframe.style.setProperty('transform', 'translateZ(0) scale(' + scaleValue + ')', 'important');
      youtubeIframe.style.setProperty('-webkit-transform', 'translateZ(0) scale(' + scaleValue + ')', 'important');
      youtubeIframe.style.setProperty('transform-origin', 'center center', 'important');
      youtubeIframe.style.setProperty('-webkit-transform-origin', 'center center', 'important');
      
      // Force hardware acceleration for better rendering on mobile
      youtubeIframe.style.setProperty('will-change', 'transform', 'important');
      youtubeIframe.style.setProperty('-webkit-backface-visibility', 'hidden', 'important');
      youtubeIframe.style.setProperty('backface-visibility', 'hidden', 'important');
  }
  
  // Update video scale on window resize
  function updateVideoScale() {
      var youtubeIframe = document.querySelector('.banner-youtube-container iframe');
      if (youtubeIframe) {
          var isMobile = window.innerWidth <= 768;
          var scaleValue = isMobile ? 3.8 : 1.6; // Reduced from 3.8 to 3.2 for better quality
          youtubeIframe.style.setProperty('transform', 'translateZ(0) scale(' + scaleValue + ')', 'important');
          youtubeIframe.style.setProperty('-webkit-transform', 'translateZ(0) scale(' + scaleValue + ')', 'important');
          
          // Also enforce quality when resizing
          if (bannerYouTubePlayer) {
              setOptimalQuality(bannerYouTubePlayer);
          }
      }
  }
  
  // Listen for window resize to update scale
  var resizeTimeout;
  window.addEventListener('resize', function() {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(updateVideoScale, 100);
  });

  // Monitor and keep video playing
  function startVideoMonitoring() {
      if (!bannerYouTubePlayer) return;
      
      setInterval(function() {
          try {
              var state = bannerYouTubePlayer.getPlayerState();
              
              // If paused, play it
              if (state === YT.PlayerState.PAUSED) {
                  bannerYouTubePlayer.playVideo();
              }
              // If ended, restart for loop
              else if (state === YT.PlayerState.ENDED) {
                  bannerYouTubePlayer.seekTo(0, true);
                  bannerYouTubePlayer.playVideo();
              }
              
              // Ensure muted and optimal quality
              bannerYouTubePlayer.mute();
              setOptimalQuality(bannerYouTubePlayer);
              
              // On mobile, check quality more frequently
              if (window.innerWidth <= 768) {
                  setOptimalQuality(bannerYouTubePlayer);
              }
          } catch(e) {
              // Ignore errors
          }
      }, 1000);
  }

  // Initialize if YouTube API is already loaded - BANNER ONLY
  if (typeof YT !== 'undefined' && YT.Player) {
      onYouTubeIframeAPIReadyBanner();
  }

  // Prevent interactions
  document.addEventListener('contextmenu', function(e) {
      if (e.target.closest('.banner-youtube-container')) {
          e.preventDefault();
          return false;
      }
  }, false);
  
  document.addEventListener('keydown', function(e) {
      if (e.target.closest('.banner-youtube-container') || 
          (e.key === ' ' || e.key === 'k' || e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
          if (document.activeElement && document.activeElement.closest('.banner-youtube-container')) {
              e.preventDefault();
              return false;
          }
      }
  }, false);
  
  document.addEventListener('dragstart', function(e) {
      if (e.target.closest('.banner-youtube-container')) {
          e.preventDefault();
          return false;
      }
  }, false);
  
  // Ensure banner YouTube container has overlays and blocked interactions
  function enforceBannerYouTubeBlocking() {
      var container = document.querySelector('.banner-youtube-container');
      if (!container) return;
      
      var iframe = container.querySelector('iframe');
      if (iframe) {
          iframe.style.pointerEvents = 'none';
          styleYouTubeIframe(iframe);
          
          var blocker = container.querySelector('.youtube-overlay-blocker');
          if (!blocker) {
              blocker = document.createElement('div');
              blocker.className = 'youtube-overlay-blocker';
              container.appendChild(blocker);
          }
          blocker.style.cssText = 'position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100000; pointer-events: auto !important; background: transparent; cursor: default;';
      }
  }
  
  // Initialize blocking
  enforceBannerYouTubeBlocking();
  setTimeout(enforceBannerYouTubeBlocking, 100);
  setTimeout(enforceBannerYouTubeBlocking, 500);
  
  // Monitor DOM for changes
  if (window.MutationObserver) {
      var observer = new MutationObserver(function(mutations) {
          enforceBannerYouTubeBlocking();
      });
      observer.observe(document.body, {
          childList: true,
          subtree: true
      });
  }
</script>
